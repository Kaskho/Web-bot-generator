<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Meme Coin Code Generator</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <div class="container">
    <h1>🐸 Meme Coin Code Generator</h1>
    <form id="genForm" method="post" action="/generate" enctype="multipart/form-data">
      <label>Coin Name:</label>
      <input type="text" name="coin_name" placeholder="NEXTPEPE" required>

      <label>Ticker:</label>
      <input type="text" name="ticker" placeholder="NPEPE" required>

      <label>Network:</label>
      <input type="text" name="network" value="Pump.fun">

      <label>Narrative / Story:</label>
      <textarea name="narrative" rows="10" placeholder="Write your meme coin story here..." required></textarea>

      <label>Upload Media (optional image/video):</label>
      <input type="file" name="file" accept="image/*,video/*">

      <h3>Social Links</h3>
      <label>X (Twitter) URL:</label>
      <input type="url" name="x_url" value="https://x.com/">

      <label>Telegram URL:</label>
      <input type="url" name="telegram_url" value="https://t.me/">

      <label>Pump.fun URL:</label>
      <input type="url" name="pump_fun" value="https://pump.fun/">

      <button type="submit">🚀 Generate Project</button>
    </form>

    <p id="status"></p>
  </div>

  <script>
  const form = document.getElementById("genForm");
  form.addEventListener("submit", async e => {
    e.preventDefault();
    const status = document.getElementById("status");
    status.innerText = "⏳ Generating project...";
    const data = new FormData(form);
    const res = await fetch("/generate", { method: "POST", body: data });
    if (!res.ok) {
      status.innerText = "❌ Error generating project.";
      return;
    }
    const blob = await res.blob();
    const a = document.createElement("a");
    a.href = window.URL.createObjectURL(blob);
    a.download = data.get("coin_name") + "_project.zip";
    a.click();
    status.innerText = "✅ Downloaded!";
  });
  </script>
</body>
</html>
